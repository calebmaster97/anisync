<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>VortexAnime – Anime Browser</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />

<style>
/* ============================================================
   PREMIUM GLASSMORPHISM VORTEXANIME THEME
   ============================================================ */
:root {
  --bg: #0d0f14;
  --card: rgba(255, 255, 255, 0.05);
  --glass: rgba(255, 255, 255, 0.06);
  --border: rgba(255, 255, 255, 0.15);
  --text: #f3f6fa;
  --muted: #9ca7b8;
  --accent: #7aa2ff;
  --accent2: #8bd8ff;
  --round: 14px;
  --blur: 18px;
  --shadow: 0 0 25px rgba(0, 0, 0, 0.4);
  --card-shadow: 0 8px 35px rgba(0, 0, 0, 0.45);
}

* { box-sizing: border-box; font-family: "Inter", Arial, sans-serif; }

body {
  margin: 0;
  background: radial-gradient(circle at top, #151922, #0d0f14);
  color: var(--text);
  min-height: 100vh;
}

header {
  text-align: center;
  padding: 40px 10px;
  background: linear-gradient(to bottom, #131722aa, #0d0f1400);
  backdrop-filter: blur(10px);
}

header h1 {
  font-size: 3.5rem;
  margin: 0;
  font-weight: 800;
  background: linear-gradient(90deg, #7aa2ff, #8bd8ff);
  -webkit-background-clip: text;
  color: transparent;
  letter-spacing: -2px;
}

header p { color: var(--muted); margin-top: 8px; font-weight: 500; }

.controls {
  display: flex;
  gap: 12px;
  padding: 18px;
  flex-wrap: wrap;
  justify-content: center;
  background: var(--glass);
  border: 1px solid var(--border);
  backdrop-filter: blur(var(--blur));
  border-radius: var(--round);
  margin: 0 auto 30px auto;
  width: clamp(260px, 95%, 1200px);
  box-shadow: var(--shadow);
}

.controls select, .controls input, .controls button {
  padding: 12px 16px;
  border-radius: var(--round);
  background: rgba(255, 255, 255, 0.07);
  border: 1px solid var(--border);
  color: var(--text);
  font-size: 0.95rem;
  transition: 0.2s ease;
}

.controls input { flex-grow: 2; min-width: 250px; }
.controls select { flex-grow: 1; }

.controls select:focus, .controls input:focus {
  outline: none;
  border-color: var(--accent);
}

button {
  cursor: pointer;
  background: linear-gradient(135deg, #7aa2ff55, #8bd8ff33);
  font-weight: 600;
}

button:hover { transform: scale(1.04); border-color: var(--accent2); }

.grid {
  padding: 20px;
  display: grid;
  gap: 25px;
  grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
  width: clamp(260px, 95%, 1500px);
  margin: auto;
}

.card {
  background: var(--card);
  border-radius: var(--round);
  border: 1px solid var(--border);
  overflow: hidden;
  backdrop-filter: blur(var(--blur));
  box-shadow: var(--card-shadow);
  transition: 0.3s ease;
  display: flex;
  flex-direction: column;
}

.card:hover { transform: translateY(-8px); border-color: var(--accent); }
.card img { width: 100%; aspect-ratio: 2/3; object-fit: cover; }
.content { padding: 15px; flex-grow: 1; display: flex; flex-direction: column; }
.title { font-size: 1.1rem; font-weight: 700; margin-bottom: 6px; }
.meta { color: var(--muted); margin-bottom: 12px; font-size: 0.9rem; }

.card-actions {
  margin-top: auto;
  display: flex;
  gap: 10px;
  align-items: center;
}

.card-link { color: var(--accent); text-decoration: none; font-weight: 600; font-size: 0.9rem; }
.copy-btn {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid var(--border);
  color: var(--text);
  padding: 4px 10px;
  border-radius: 8px;
  font-size: 0.8rem;
  cursor: pointer;
}

#backToTop {
  position: fixed; bottom: 30px; right: 30px; width: 50px; height: 50px;
  border-radius: 50%; background: var(--glass); backdrop-filter: blur(10px);
  border: 1px solid var(--border); color: var(--accent); font-size: 24px;
  cursor: pointer; display: none; z-index: 1000; transition: 0.3s;
}

#loadMore { display: block; margin: 40px auto; padding: 14px 40px; }

/* Toast Notification */
#toast {
  position: fixed; bottom: 30px; left: 50%; transform: translateX(-50%);
  background: var(--accent); color: #000; padding: 10px 20px;
  border-radius: 30px; font-weight: 700; display: none; z-index: 2000;
}

@media (max-width: 800px) {
  header h1 { font-size: 2.5rem; }
  .controls { width: 95%; flex-direction: column; }
}
</style>
</head>
<body>

<header>
  <h1>VortexAnime</h1>
  <p>The Ultimate Vortex for Global Anime Discovery</p>
</header>

<div class="controls">
  <input id="search" type="text" placeholder="Search any anime title..." />
  <select id="genre">
    <option value="">All Genres</option>
    <option value="Action">Action</option>
    <option value="Adventure">Adventure</option>
    <option value="Comedy">Comedy</option>
    <option value="Drama">Drama</option>
    <option value="Fantasy">Fantasy</option>
    <option value="Horror">Horror</option>
    <option value="Mecha">Mecha</option>
    <option value="Music">Music</option>
    <option value="Mystery">Mystery</option>
    <option value="Psychological">Psychological</option>
    <option value="Romance">Romance</option>
    <option value="Sci-Fi">Sci-Fi</option>
    <option value="Slice of Life">Slice of Life</option>
    <option value="Sports">Sports</option>
    <option value="Supernatural">Supernatural</option>
    <option value="Thriller">Thriller</option>
  </select>
  <select id="year"></select>
  <select id="season">
    <option value="">All Seasons</option>
    <option value="WINTER">Winter</option>
    <option value="SPRING">Spring</option>
    <option value="SUMMER">Summer</option>
    <option value="FALL">Autumn</option>
  </select>
  <button id="refresh">Refresh</button>
</div>

<div id="grid" class="grid"></div>
<button id="loadMore" style="display: none;">Explore More</button>
<button id="backToTop">↑</button>
<div id="toast">Link Copied!</div>

<footer>
  <p style="text-align: center; color: var(--muted); padding: 40px 0; font-size: 0.9rem;">
    VortexAnime • Powered by AniList API
  </p>
</footer>

<script>
  const grid = document.getElementById("grid");
  const yearSel = document.getElementById("year");
  const seasonSel = document.getElementById("season");
  const genreSel = document.getElementById("genre");
  const searchInput = document.getElementById("search");
  const loadMoreBtn = document.getElementById("loadMore");
  const backToTopBtn = document.getElementById("backToTop");
  const toast = document.getElementById("toast");

  let currentPage = 1;

  function setupYears() {
    const CURRENT_YEAR = new Date().getFullYear();
    let html = `<option value="">All Years</option>`;
    for (let y = CURRENT_YEAR + 1; y >= 1960; y--) {
      html += `<option value="${y}">${y}</option>`;
    }
    yearSel.innerHTML = html;
  }

  async function fetchAnime(isNewSearch = true) {
    if (isNewSearch) {
      currentPage = 1;
      grid.innerHTML = "<p style='grid-column: 1/-1; text-align: center;'>Entering the Vortex...</p>";
    }

    const searchTerm = searchInput.value.trim();
    const variables = {
      page: currentPage,
      search: searchTerm || undefined,
      genre: genreSel.value || undefined,
      year: searchTerm ? undefined : (yearSel.value ? parseInt(yearSel.value) : undefined),
      season: searchTerm ? undefined : (seasonSel.value || undefined)
    };

    const query = `
      query ($page: Int, $year: Int, $season: MediaSeason, $search: String, $genre: String) {
        Page(page: $page, perPage: 24) {
          pageInfo { hasNextPage }
          media(seasonYear: $year, season: $season, search: $search, genre: $genre, type: ANIME, isAdult: false, sort: POPULARITY_DESC) {
            id
            title { english romaji }
            coverImage { extraLarge }
            seasonYear
            genres
            siteUrl
          }
        }
      }
    `;

    try {
      const response = await fetch('https://graphql.anilist.co', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ query, variables })
      });
      const result = await response.json();
      const data = result.data.Page;
      if (isNewSearch) grid.innerHTML = "";
      renderCards(data.media);
      loadMoreBtn.style.display = data.pageInfo.hasNextPage ? "block" : "none";
    } catch (err) {
      grid.innerHTML = "<p style='grid-column: 1/-1; text-align: center;'>Vortex error. Try again.</p>";
    }
  }

  function renderCards(list) {
    const html = list.map(anime => {
      const title = anime.title.english || anime.title.romaji;
      return `
        <div class="card">
          <img src="${anime.coverImage.extraLarge}" alt="cover" loading="lazy">
          <div class="content">
            <div class="title">${title}</div>
            <div class="meta">${anime.genres[0] || 'Anime'} • ${anime.seasonYear || ''}</div>
            <div class="card-actions">
              <a class="card-link" href="${anime.siteUrl}" target="_blank">Details</a>
              <button class="copy-btn" onclick="copyLink('${anime.siteUrl}')">Copy Link</button>
            </div>
          </div>
        </div>
      `;
    }).join('');
    grid.insertAdjacentHTML('beforeend', html);
  }

  window.copyLink = (url) => {
    navigator.clipboard.writeText(url).then(() => {
      toast.style.display = "block";
      setTimeout(() => { toast.style.display = "none"; }, 2000);
    });
  };

  setupYears();
  document.getElementById("refresh").onclick = () => fetchAnime(true);
  loadMoreBtn.onclick = () => { currentPage++; fetchAnime(false); };
  [yearSel, seasonSel, genreSel].forEach(el => el.onchange = () => fetchAnime(true));

  let timer;
  searchInput.oninput = () => {
    clearTimeout(timer);
    timer = setTimeout(() => fetchAnime(true), 600);
  };

  window.onscroll = () => backToTopBtn.style.display = window.scrollY > 500 ? "block" : "none";
  backToTopBtn.onclick = () => window.scrollTo({ top: 0, behavior: 'smooth' });

  fetchAnime(true);
</script>
</body>
</html>
